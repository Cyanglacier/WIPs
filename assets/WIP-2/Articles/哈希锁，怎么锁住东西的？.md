# 哈希锁，怎么锁住东西的？
<br>
*理解什么是哈希时间锁与哈希高度锁*
<br><br>

### 引言
<br>
在WIsdom Chain的2.0白皮书中，有这么一段解释条件支付的内容：
<br>
> 当一笔支付需要满足某个条件时才能被触发，称之为条件支付。“哈希时间锁定”就是一种条件，“哈希高度锁定”也是一种条件。支付对于区块链来说，就是一种事务结构，验证通过并且入块后即表示资产发生了转移……
<br>
虽然前些年闪电网络的兴起让大家对于“哈希时间锁”不再陌生，但随着闪电网络热潮的褪去，对哈希锁的相关讨论也随之冷寂了。哈希锁在整个区块链历史中有着重要的地位，从最早的原子交换，到后来的闪电网络，都离不开哈希锁技术的应用。虽然技术总会更迭，以此淘汰一些落后技术，部分人也开始怀疑“哈希锁是一个过时技术，应当被淘汰”，但目前来看，哈希锁作为一个重要的解锁条件，想要短期内用其他技术替代掉它在经济上是不明智的。既然哈希锁有存在的理由，为何不去了解一下它呢？这篇文章会带你基本了解哈希锁以及其两大重要应用——哈希时间锁与哈希高度锁。
<br><br>

### 哈希锁的概念
<br>
“哈希锁”这个概念最早实在2013年bitcointalk上被提出，当时论坛上讨论了如何实现比特币与其他数字货币的去中心化交换，顺带一提这个讨论的最后成果之一便是有名的“原子交换Atomic Swap”。哈希锁被提出后，莱特币首先做起了应用，并成功实现了莱特币与比特币的原子交换，变相证明了哈希锁的可行性，后来闪电网络的成功应用也再次证明了哈希锁技术的实用性。了解了基本的情况，也该了解哈希锁的工作原理了。
<br><br>
哈希锁的技术细节并不复杂。首先我们需要敲定一个通用的哈希函数，这里以常用的SHA3-256作为例子，由于哈希函数的种种特性，我们可以认为一个信息经过SHA3-256哈希后，想要获得相同的哈希值就只能属于原信息值才行。而哈希锁则是通过对特定交易进行哈希锁定，交易方约定一个密钥，将该密钥哈希作为锁定值，锁定某一交易，只有在提供与哈希值相匹配的密钥信息后交易才可解锁，交易方才能取回相应金钱。换句话说，如果某个交易通过哈希锁进行了锁定，想要取回金钱，除了提交密钥信息以外就只能靠哈希碰撞，后者在目前来看是不可能的，这也是哈希锁被认为是“安全”的原因。
<br><br>
用代码表示可以更简单明了（以下代码经过简化）：
<br>

```

Hashlock{
	Sender;
	Receiver;
	Amount;
	Hashlock;
	Secret;
}

```

<br>
上面的代码表示了一个哈希锁应当具备的基础内容， *Sender* 代表交易发起者， *Receiver* 代表交易接收者， *Amount* 即本次交易的代币数量， *Hashlock* 代表了密钥的哈希值，用来对该交易上锁， *Secret* 则是密钥，密钥的哈希值应当等于 *Hashlock* ，用来对交易进行解锁。
<br><br>
### 哈希时间锁与哈希高度锁
<br>
